<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use Illuminate\Support\Str;
use App\Models\Category;

class CategorySeeder extends Seeder
{
    public function run(): void
    {
        // সব পুরানো ক্যাটেগরি ডিলিট করে ফেলা
        Category::truncate();

        $this->createCategoryTree([
            // তোমার পুরানো ক্যাটেগরি অ্যারে এখানে অপরিবর্তিত
            'লাইব্রেরি' => [
                'বই' => [
                    'ইসলামিক' => [
                        'কুরআন',
                        'হাদিস',
                        'ফিকহ',
                        'আকিদা',
                        'সীরাত',
                        'দোয়া ও যিকর',
                        'ইসলামিক ইতিহাস',
                        'ইসলামিক সাহিত্য',
                        'নারী ও ইসলাম',
                        'শিশুদের ইসলামিক বই',
                        'অন্যান্য',
                    ],
                    'উপন্যাস',
                    'শিশুতোষ বই'
                ],
                'ম্যাগাজিন',
            ],
            'পোষাক' => [
                'পুরুষ' => [
                    'পাঞ্জাবি',
                    'শার্ট',
                    'টিশার্ট',
                    'জিন্স প্যান্ট',
                    'কোর্ট',
                    'সুয়েটার',
                    'হুডি',
                    'ট্রাউজার',
                    'লুঙ্গি',
                    'স্যান্ডো গেঞ্জি',
                ],
                'নারী' => [
                    'বোরখা',
                    'সালোয়ার কামিজ',
                    'শাড়ি',
                    'হিজাব',
                    'গাউন',
                    'নাইটি',
                    'ব্লাউজ',
                    'পেটিকোট',
                    'স্কার্ফ',
                    'লেগিংস',
                ],
                'শিশু' => [
                    'ছেলেদের জামা',
                    'মেয়েদের জামা',
                    'বেবি ফ্রক',
                    'ছেলেদের প্যান্ট',
                    'বেবি সেট',
                    'সোয়েটার',
                ],
            ],
            'ইলেকট্রনিক্স' => [
                'মোবাইল ফোন',
                'ল্যাপটপ',
                'ট্যাবলেট',
                'টিভি',
                'ফ্রিজ',
            ],
            'খেলনা ও গেমস' => [
                'শিশুদের খেলনা',
                'ভিডিও গেমস',
                'বোর্ড গেমস',
            ],
            'খাদ্য ও পানীয়' => [
                'মসলাজাত',
                'প্যাকেট খাবার',
                'বেভারেজ',
            ],
            'স্বাস্থ্য ও বিউটি' => [
                'ত্বক পরিচর্যা',
                'চুল পরিচর্যা',
                'পারফিউম',
            ],
            'হোম ও লিভিং' => [
                'ফার্নিচার',
                'বিছানার চাদর',
                'পর্দা',
            ],
            'মা ও শিশু' => [
                'ডায়াপার',
                'বেবি ফুড',
                'বেবি ড্রেস',
            ],
            'ঔষধ' => [
                'জেনারেল ঔষধ' => [
                    'জ্বরের ঔষধ',
                    'ব্যথার ঔষধ',
                    'সর্দি-কাশির ঔষধ',
                    'অ্যালার্জির ঔষধ',
                    'অ্যান্টিবায়োটিক',
                    'চোখের ড্রপ',
                    'কান ও নাকের ঔষধ',
                    'ত্বকের ঔষধ',
                ],
                'ডায়াগনস্টিক মেডিসিন' => [
                    'ডায়াবেটিস ঔষধ',
                    'প্রেসার ঔষধ',
                    'হৃদরোগের ঔষধ',
                    'থাইরয়েড ঔষধ',
                    'লিভারের ঔষধ',
                    'কিডনির ঔষধ',
                    'কোলেস্টেরল নিয়ন্ত্রণ',
                ],
                'পেটের ঔষধ' => [
                    'অ্যাসিডিটির ঔষধ',
                    'গ্যাস্ট্রিক',
                    'ডায়রিয়া',
                    'কবজ ও হজমের সমস্যা',
                    'বমি ও বমিভাব',
                    'পেট ব্যথা',
                    'জন্ডিস চিকিৎসা',
                ],
                'মেয়েদের স্বাস্থ্য' => [
                    'প্রেগনেন্সি সাপোর্ট',
                    'পিরিয়ড রিলিফ মেডিসিন',
                    'নারী হরমোন সাপোর্ট',
                    'জন্মনিয়ন্ত্রণ পিল',
                    'স্তনদুগ্ধ বৃদ্ধি সাপ্লিমেন্ট',
                    'মেনোপজ সাপোর্ট',
                ],
                'শিশুদের ঔষধ' => [
                    'শিশুদের সাপ্লিমেন্ট',
                    'বেবি স্যারাপ',
                    'বেবি ট্যাবলেট',
                    'ক্যালসিয়াম সাপোর্ট',
                    'ভিটামিন ড্রপ',
                    'দাঁত ওঠার সময়ের ঔষধ',
                ],
                'প্রাকৃতিক ও বিকল্প চিকিৎসা' => [
                    'হোমিওপ্যাথিক',
                    'আয়ুর্বেদিক',
                    'হারবাল',
                    'ইউনানি',
                    'বায়োকেমিক মেডিসিন',
                ],
                'পুষ্টি ও সাপ্লিমেন্ট' => [
                    'ভিটামিন ও মিনারেল',
                    'প্রোটিন সাপ্লিমেন্ট',
                    'ইমিউন সাপোর্ট',
                    'এনার্জি বুস্টার',
                    'ওজন বাড়ানোর সাপ্লিমেন্ট',
                    'ওজন কমানোর সাপ্লিমেন্ট',
                ],
            ],
            'স্পোর্টস ও আউটডোর' => [
                'জুতা',
                'স্পোর্টস ড্রেস',
                'জার্সি',
                'ফুটবল',
                'ক্রিকেট ব্যাট',
            ],
            'অফিস ও স্কুল' => [
                'কলম',
                'পেনসিল',
                'ডায়েরি',
                'নোটবুক',
                'খাতা',
                'ফাইল',
                'ফাইল কভার',
                'স্ট্যাপলার',
                'পেপার ক্লিপ',
                'স্কেল',
                'জ্যামিতি বক্স',
                'কালার পেন্সিল',
                'মার্কার',
                'বোর্ড ডাস্টার',
                'বোর্ড মার্কার',
                'গ্লু স্টিক',
                'টেপ',
                'পেপার কাটার',
                'ক্যালকুলেটর',
                'ডেস্ক অর্গানাইজার',
                'স্কুল ব্যাগ',
                'লাঞ্চ বক্স',
                'জলের বোতল',
                'স্টুডেন্ট ইউনিফর্ম',
                'প্রজেক্ট বোর্ড',
                'স্টিকার',
                'ইরেজার',
                'শার্পনার',
                'অফিস ডেস্ক',
                'চেয়ার',
                'হোয়াইটবোর্ড',
            ],
        ]);
    }

    private function createCategoryTree(array $categories, $parentId = null): void
    {
        foreach ($categories as $name => $children) {
            if (is_int($name)) {
                $category = Category::create([
                    'name' => $children,
                    'slug' => Str::slug($children),
                    'parent_id' => $parentId,
                ]);
            } else {
                $category = Category::create([
                    'name' => $name,
                    'slug' => Str::slug($name),
                    'parent_id' => $parentId,
                ]);
                $this->createCategoryTree($children, $category->id);
            }
        }
    }
}
